

<!DOCTYPE html>
<html class="writer-html4" lang="ar" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>دروس &mdash; OpenDroneMap 2.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="الخيارات والإعلام" href="arguments.html" />
    <link rel="prev" title="التثبيت والبدء" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> OpenDroneMap
          

          
          </a>

          
            
            
              <div class="version">
                2.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">التثبيت والبدء</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#hardware-recommendations">توصيات الأجهزة</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#installation">التركيب</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#windows">Windows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-1-check-virtualization-support">الخطوة 1. تحقق من دعم المحاكاة الافتراضية</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-2-install-requirements">الخطوة 2. تثبيت المتطلبات</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-3-check-memory-and-cpu-allocation">الخطوة 3. تحقق من تخصيص الذاكرة ووحدة المعالجة المركزية</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-4-download-webodm">الخطوة 4. قم بتنزيل WebODM</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-4-launch-webodm">الخطوة 4. قم بتشغيل WebODM</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#macos">macOS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="installation.html#id1">الخطوة 1. تحقق من دعم المحاكاة الافتراضية</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#id2">الخطوة 2. تثبيت المتطلبات</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#id3">الخطوة 3. تحقق من تخصيص الذاكرة ووحدة المعالجة المركزية</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-4-download-and-launch-webodm">الخطوة 4. قم بتحميل وتشغيل WebODM</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#linux">Linux</a><ul>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-1-install-requirements">الخطوة 1. تثبيت المتطلبات</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-2-check-additional-requirements">الخطوة 2. تحقق من المتطلبات الإضافية</a></li>
<li class="toctree-l4"><a class="reference internal" href="installation.html#step-3-download-and-launch-webodm">الخطوة 3. قم بتحميل وتشغيل WebODM</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#basic-commands-and-troubleshooting">الأوامر الأساسية واستكشاف الأخطاء وإصلاحها</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#hello-webodm">مرحبًا WebODM!</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#running-on-more-than-one-machine">يعمل على أكثر من جهاز</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">دروس</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-high-quality-orthophotos">إنشاء Orthophotos عالية الجودة</a></li>
<li class="toctree-l2"><a class="reference internal" href="#calibrating-the-camera">معايرة الكاميرا</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-digital-elevation-models">إنشاء نماذج الارتفاعات الرقمية</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-docker">باستخدام  Docker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#listing-docker-machines">ادراج Docker ماكينات</a></li>
<li class="toctree-l3"><a class="reference internal" href="#accessing-logs-on-the-instance">الوصول إلى السجلات على سبيل المثال</a></li>
<li class="toctree-l3"><a class="reference internal" href="#command-line-access-to-instances">وصول سطر الأوامر إلى المثيلات</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cleaning-up-after-docker">التنظيف بعد Docker</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#using-odm-from-low-bandwidth-location">استخدام ODM من موقع النطاق الترددي المنخفض</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-is-this-and-who-is-it-for">ما هذا ومن هو؟</a></li>
<li class="toctree-l3"><a class="reference internal" href="#steps">خطوات</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#install">تثبيت</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prep-data-and-project">إعداد البيانات والمشروع</a></li>
<li class="toctree-l4"><a class="reference internal" href="#resize-droplet-pull-pin-run-away">تغيير حجم القطرة ، وسحب دبوس ، والهروب</a></li>
<li class="toctree-l4"><a class="reference internal" href="#after-it-finishes-assuming-you-survive-that-long">بعد الانتهاء (بافتراض أنك تعيش طويلاً)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="arguments.html">الخيارات والإعلام</a></li>
<li class="toctree-l1"><a class="reference internal" href="outputs.html">مخرجات OpenDroneMap</a><ul>
<li class="toctree-l2"><a class="reference internal" href="outputs.html#point-cloud">سحابة نقطة</a></li>
<li class="toctree-l2"><a class="reference internal" href="outputs.html#d-textured-model">نموذج محكم ثلاثي الأبعاد</a></li>
<li class="toctree-l2"><a class="reference internal" href="outputs.html#orthophoto">Orthophoto</a></li>
<li class="toctree-l2"><a class="reference internal" href="outputs.html#dtm-dsm">DTM/DSM</a></li>
<li class="toctree-l2"><a class="reference internal" href="outputs.html#list-of-all-outputs">قائمة بجميع المخرجات</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gcp.html">نقاط التحكم الأرضية</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gcp.html#user-interfaces">واجهات المستخدم</a><ul>
<li class="toctree-l3"><a class="reference internal" href="gcp.html#id1">POSM GCPi</a></li>
<li class="toctree-l3"><a class="reference internal" href="gcp.html#id2">GCP Editor Pro</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="geo.html">Image Geolocation Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="masks.html">Using Image Masks</a></li>
<li class="toctree-l1"><a class="reference internal" href="large.html">تقسيم مجموعات البيانات الكبيرة</a><ul>
<li class="toctree-l2"><a class="reference internal" href="large.html#calibrate-images">معايرة الصور</a></li>
<li class="toctree-l2"><a class="reference internal" href="large.html#local-split-merge">دمج التجزئة المحلية</a></li>
<li class="toctree-l2"><a class="reference internal" href="large.html#distributed-split-merge">دمج سبليت الموزعة</a><ul>
<li class="toctree-l3"><a class="reference internal" href="large.html#getting-started-with-distributed-split-merge">الشروع في البدء في عملية دمج التجزئة الموزعة</a></li>
<li class="toctree-l3"><a class="reference internal" href="large.html#understanding-the-cluster">فهم الكتلة</a></li>
<li class="toctree-l3"><a class="reference internal" href="large.html#accessing-the-logs">الوصول إلى السجلات</a></li>
<li class="toctree-l3"><a class="reference internal" href="large.html#autoscaling-clusterodm">أوتوسكالينج  ClusterODM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="large.html#limitations">محددات</a></li>
<li class="toctree-l2"><a class="reference internal" href="large.html#acknowledgments">شكر وتقدير</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">مراجع إضافية</a><ul>
<li class="toctree-l2"><a class="reference internal" href="resources.html#for-users">للمستخدمين</a></li>
<li class="toctree-l2"><a class="reference internal" href="resources.html#for-developers">للمطورين</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="flying.html">نصائح طيران</a></li>
<li class="toctree-l1"><a class="reference internal" href="multispectral.html">دعم متعدد الأطياف</a><ul>
<li class="toctree-l2"><a class="reference internal" href="multispectral.html#hardware">المعدات</a></li>
<li class="toctree-l2"><a class="reference internal" href="multispectral.html#usage">الاستخدام</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="requesting-features.html">كيفية طلب الميزات</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">.كيفية المشاركة</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#community-forum">جو الإجتماعي</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#reporting-bugs">البق للتقرير</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#template-for-submitting-bug-reports">نموذج لتقديم تقارير الأخطاء</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#pull-requests">سحب الطلبات</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OpenDroneMap</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>دروس</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tutorials.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorials">
<h1>دروس<a class="headerlink" href="#tutorials" title="Permalink to this headline">¶</a></h1>
<p>ستجد أدناه تعليمات لبعض حالات الاستخدام الشائعة.</p>
<div class="section" id="creating-high-quality-orthophotos">
<h2>إنشاء Orthophotos عالية الجودة<a class="headerlink" href="#creating-high-quality-orthophotos" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center">
<img alt="image of OpenDroneMap orthophoto" src="_images/orthophoto.png" />
</div>
<p>بدون أي تعديلات في المعلمات ، يختار ODM حل وسط جيد بين الجودة والسرعة واستخدام الذاكرة. إذا كنت ترغب في الحصول على نتائج عالية الجودة ، فأنت بحاجة إلى تعديل بعض المعلمات:</p>
<blockquote>
<div><ul class="simple">
<li>Resolution '' هي دقة صورة Orthophoto بالسنتيمتر / بكسل. إنقاص هذه القيمة للحصول على نتيجة دقة أعلى.</li>
<li>&quot;--ignore-gsd&quot; هي علامة توجه تعليمات ODM لتخطي بعض الذاكرة وتحسينات السرعة التي تؤثر بشكل مباشر على الصورة. سيؤدي استخدام هذه العلامة إلى زيادة وقت التشغيل واستخدام الذاكرة ، ولكن قد ينتج عنه نتائج أكثر وضوحًا.</li>
<li>يجب زيادة <code class="docutils literal notranslate"><span class="pre">-texturing-nadir-weight</span></code> إلى <code class="docutils literal notranslate"><span class="pre">29-32</span></code> في المناطق الحضرية لإعادة بناء حواف أفضل للأسقف. يجب تخفيضها إلى &quot;0-6&quot; في المناطق العشبية / المسطحة.</li>
<li>يجب تعيين <code class="docutils literal notranslate"><span class="pre">--texturing-data-term</span></code> على &quot;المنطقة&quot; في مناطق الغابات.</li>
<li>يجب زيادة <code class="docutils literal notranslate"><span class="pre">mesh-size--</span></code> إلى <code class="docutils literal notranslate"><span class="pre">300000-600000</span></code> و <code class="docutils literal notranslate"><span class="pre">--mesh-octree-depth</span></code> يجب زيادتها إلى <code class="docutils literal notranslate"><span class="pre">10-11</span></code> في المناطق الحضرية لإعادة إنشاء مباني / أسقف أفضل.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="calibrating-the-camera">
<h2>معايرة الكاميرا<a class="headerlink" href="#calibrating-the-camera" title="Permalink to this headline">¶</a></h2>
<p>تعد معايرة الأميرة تحديًا خاصًا مع كاميرات السلع. يمكن أن تؤثر التغيرات في درجات الحرارة والاهتزازات والتركيز والعوامل الأخرى على المعلمات المشتقة مع تأثيرات كبيرة على البيانات الناتجة. المعايرة التلقائية أو الذاتية ممكنة ومرغوب فيها مع رحلات الطائرات بدون طيار ، ولكن اعتمادًا على نمط الرحلة ، قد لا تؤدي المعايرة التلقائية إلى إزالة كل التشويه من المنتجات الناتجة. جيمس وروبسون (2014) في ورقتهما بعنوان `` التخفيف من الخطأ المنهجي في النماذج الطبوغرافية المشتقة من الطائرات بدون طيار وشبكات الصور الأرضية &lt;<a class="reference external" href="https://onlinelibrary.wiley.com/doi/full/10.1002/esp.3609">https://onlinelibrary.wiley.com/doi/full/10.1002/esp.3609</a>&gt; &quot;_ معالجة كيف لتقليل التشويه من المعايرة الذاتية.</p>
<div class="figure align-center">
<img alt="image of lens distortion effect on bowling of data" src="_images/msimbasi_bowling.png" />
</div>
<p><em>Bowling effect on point cloud over 13,000+ image dataset collected by World Bank Tanzania over the flood prone Msimbasi Basin, Dar es Salaam, Tanzania.</em></p>
<p>للتخفيف من هذا التأثير ، هناك عدد قليل من الخيارات ولكن أبسطها على النحو التالي: حلّق بنمطين مفصولين بـ 20 درجة ، وبدلاً من أن يكون لديك كاميرا (إشارة مستقيمة لأسفل) ، استخدم واحدًا يميل إلى الأمام بمقدار 5 درجات.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/flightplanning.gif"><img alt="animation showing optimum" src="_images/flightplanning.gif" style="width: 640px; height: 480px;" /></a>
</div>
<p>نظرًا لأن هذا النهج في الطيران يمكن أن يستغرق وقتًا أطول من الرحلات النموذجية ، يمكن للطيار أو الفريق أن يطير في منطقة صغيرة باستخدام النهج أعلاه. ستقوم OpenDroneMap بإنشاء ملف معايرة يسمى camera.json يمكن استيراده بعد ذلك لاستخدامه لمعايرة رحلة أخرى يتم نقلها بكفاءة أكبر.</p>
<p>بدلاً من ذلك ، يمكن تطبيق الطريقة التجريبية التالية: حلّق بتداخل أقل بكثير ، لكن رحلتين * متصالبتين * (تسمى أحيانًا التقاطع المائل) مفصولتين بزاوية 20 درجة مع كاميرا أمامية 5 درجات.</p>
<ul class="simple">
<li>مكن أن تكون نسب التداخل بين خطوط الشبكة أقل من الرحلات المتوازية. للحصول على نتائج جيدة ثلاثية الأبعاد ، ستحتاج إلى تداخل 68٪ و sidelap لما يعادل 83٪ تداخل و sidelap.</li>
<li>للحصول على نتائج جيدة ثنائية الأبعاد و 2.5 D (نموذج الارتفاع الرقمي) ، ستحتاج إلى 42٪ تداخل و sidelap للحصول على 70٪ تراكب و sidelap مكافئ.</li>
</ul>
<div class="figure align-center">
<img alt="animation showing experimental optimum" src="_images/rotation.gif" />
</div>
<p>كما تحسن خطوط الطيران المنفصلة عموديًا الدقة ، ولكنها أقل دقة من الكاميرا التي تواجه الأمام بمقدار 5 درجات.</p>
<div class="figure align-center">
<img alt="figure showing effect of vertically separated flight lines and forward facing cameras on improving self calibration" src="_images/forward_facing.png" />
</div>
<p>من James and Robson (2014), <a class="reference external" href="https://creativecommons.org/licenses/by/4.0">CC BY 4.0</a></p>
</div>
<div class="section" id="creating-digital-elevation-models">
<h2>إنشاء نماذج الارتفاعات الرقمية<a class="headerlink" href="#creating-digital-elevation-models" title="Permalink to this headline">¶</a></h2>
<p>بشكل افتراضي لا يُنشئ ODM DEMs. لإنشاء نموذج تضاريس رقمي ، تأكد من تمرير علامة &quot;--dtm&quot;. لإنشاء نموذج سطح رقمي ، تأكد من تمرير علامة &quot;--dsm&quot;.</p>
<div class="figure align-center">
<img alt="image of OpenDroneMap derived digital surface model" src="_images/digitalsurfacemodel.png" />
</div>
<p>بالنسبة لتوليد DTM ، يتم استخدام مرشح مورفولوجي بسيط (smrf) لتصنيف النقاط في الأرض مقابل غير الأرض ويتم استخدام نقاط الأرض فقط. يمكن التحكم في مرشح `` smrf '' من خلال عدة معلمات:</p>
<blockquote>
<div><ul class="simple">
<li>قيمة القياس `` - smrf-scalar ''. قم بزيادة هذه المعلمة للتضاريس مع الكثير من الاختلافات في الارتفاع.</li>
<li>معلمة المنحدر `` - smrf-slope '' ، وهو مقياس لـ &quot;تحمل المنحدر&quot;. قم بزيادة هذه المعلمة للتضاريس مع الكثير من الاختلافات في الارتفاع. يجب ضبطه على شيء أعلى من 0.1 وليس أعلى من 1.2.</li>
<li>عتبة ارتفاع &quot;- smrf-threshold&quot;. اضبط هذه المعلمة على الحد الأدنى للارتفاع (بالأمتار) الذي تتوقعه من الكائنات غير الأرضية.</li>
<li>`` --smrf-window '' معلمة نصف قطر النافذة (بالأمتار) التي تتوافق مع حجم أكبر ميزة (المبنى والأشجار وما إلى ذلك) المراد إزالتها. يجب ضبطه على قيمة أعلى من 10.</li>
</ul>
</div></blockquote>
<p>يمكن أن يؤثر تغيير هذه الخيارات على نتيجة DTM بشكل كبير. أفضل مصدر للقراءة لفهم كيفية تأثير المعلمات على الإخراج هو قراءة الورقة الأصلية <a class="reference external" href="https://www.researchgate.net/publication/258333806_An_Improved_Simple_Morphological_Filter_for_the_Terrain_Classification_of_AirDatae_LIDAR_DATA">مرشح مورفولوجي بسيط محسن لتصنيف التضاريس لبيانات LIDAR المحمولة جواً</a> (PDF متاح مجانًا).</p>
<p>بشكل عام ، فإن خيار &quot;- smrf-threshold&quot; له أكبر الأثر على النتائج.</p>
<p>SMRF جيد في تجنب أخطاء النوع الأول (عدد صغير من نقاط الأرض المصنفة خطأً على أنها غير أرضية) ولكنها &quot;مقبولة&quot; فقط في تجنب أخطاء النوع الثاني (عدد كبير من النقاط غير الأرضية مصنفة خطأً كأرضية). يجب أن يؤخذ هذا في الاعتبار عند إنشاء DTMs التي من المفترض أن يتم استخدامها بصريًا ، لأن الكائنات التي تم الخلط بينها وبين الأرض تبدو وكأنها قطع أثرية في DTM النهائية.</p>
<div class="figure align-center">
<img alt="image of lens distortion effect on bowling of data" src="_images/smrf.png" />
</div>
<p>هناك معلمتان مهمتان أخريان تؤثران على توليد DEM:</p>
<blockquote>
<div><ul class="simple">
<li>&quot;--dem-Resolution '' الذي يضبط دقة خرج DEM النقطية (سم / بكسل)</li>
<li>&quot;-dem-gapfill-steps '' الذي يحدد عدد طبقات DEM التقدمية التي سيتم استخدامها. بالنسبة للمشاهد الحضرية ، يمكن أن تساعد زيادة هذه القيمة إلى &quot;4-5&quot; في تحقيق نتائج أفضل في الاستيفاء في المناطق التي تُركت فارغة بواسطة مرشح SMRF.</li>
</ul>
</div></blockquote>
<p>مثال على كيفية إنشاء DTM</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">ti</span> <span class="o">--</span><span class="n">rm</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">project</span><span class="p">:</span><span class="o">/</span><span class="n">datasets</span><span class="o">/</span><span class="n">code</span> <span class="o">&lt;</span><span class="n">my_odm_image</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">project</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span><span class="n">datasets</span> <span class="o">--</span><span class="n">dtm</span> <span class="o">--</span><span class="n">dem</span><span class="o">-</span><span class="n">resolution</span> <span class="mi">2</span> <span class="o">--</span><span class="n">smrf</span><span class="o">-</span><span class="n">threshold</span> <span class="mf">0.4</span> <span class="o">--</span><span class="n">smrf</span><span class="o">-</span><span class="n">window</span> <span class="mi">24</span>
</pre></div>
</div>
</div>
<div class="section" id="using-docker">
<h2>باستخدام  Docker<a class="headerlink" href="#using-docker" title="Permalink to this headline">¶</a></h2>
<p>نظرًا لأن العديد من المستخدمين يستخدمون عامل إرساء لنشر OpenDroneMap ، فقد يكون من المفيد فهم بعض الأوامر الأساسية من أجل استجواب حالات عامل الميناء عندما تسوء الأمور ، أو نشعر بالفضول حيال ما يحدث. Docker هي بيئة حاويات تهدف ، من بين أمور أخرى ، إلى تسهيل نشر البرامج بشكل مستقل عن البيئة المحلية. بهذه الطريقة ، فهي تشبه الأجهزة الافتراضية.</p>
<p>يمكن لبعض الأوامر البسيطة أن تجعل تجربة docker أفضل بكثير.</p>
<div class="section" id="listing-docker-machines">
<h3>ادراج Docker ماكينات<a class="headerlink" href="#listing-docker-machines" title="Permalink to this headline">¶</a></h3>
<p>يمكننا البدء بإدراج آلات الرصيف المتوفرة على الجهاز الحالي الذي نقوم بتشغيله على النحو التالي:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">docker</span> <span class="n">ps</span>
<span class="n">CONTAINER</span> <span class="n">ID</span>        <span class="n">IMAGE</span>                  <span class="n">COMMAND</span>                  <span class="n">CREATED</span>             <span class="n">STATUS</span>              <span class="n">PORTS</span>                    <span class="n">NAMES</span>
<span class="mi">2518817537</span><span class="n">ce</span>        <span class="n">opendronemap</span><span class="o">/</span><span class="n">odm</span>       <span class="s2">&quot;bash&quot;</span>                   <span class="mi">36</span> <span class="n">hours</span> <span class="n">ago</span>        <span class="n">Up</span> <span class="mi">36</span> <span class="n">hours</span>                                  <span class="n">zen_wright</span>
<span class="mi">1</span><span class="n">cdc7fadf688</span>        <span class="n">opendronemap</span><span class="o">/</span><span class="n">nodeodm</span>   <span class="s2">&quot;/usr/bin/nodejs /va…&quot;</span>   <span class="mi">37</span> <span class="n">hours</span> <span class="n">ago</span>        <span class="n">Up</span> <span class="mi">37</span> <span class="n">hours</span>         <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="mi">3000</span><span class="o">-&gt;</span><span class="mi">3000</span><span class="o">/</span><span class="n">tcp</span>   <span class="n">flamboyant_dhawan</span>
</pre></div>
</div>
<p>إذا أردنا رؤية الأجهزة التي قد لا تعمل ولكنها لا تزال موجودة ، فيمكننا إضافة علامة &quot;-a&quot;:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">docker</span> <span class="n">ps</span> <span class="o">-</span><span class="n">a</span>
<span class="n">CONTAINER</span> <span class="n">ID</span>        <span class="n">IMAGE</span>                  <span class="n">COMMAND</span>                  <span class="n">CREATED</span>             <span class="n">STATUS</span>                    <span class="n">PORTS</span>                    <span class="n">NAMES</span>
<span class="mi">2518817537</span><span class="n">ce</span>        <span class="n">opendronemap</span><span class="o">/</span><span class="n">odm</span>       <span class="s2">&quot;bash&quot;</span>                   <span class="mi">36</span> <span class="n">hours</span> <span class="n">ago</span>        <span class="n">Up</span> <span class="mi">36</span> <span class="n">hours</span>                                        <span class="n">zen_wright</span>
<span class="mi">1</span><span class="n">cdc7fadf688</span>        <span class="n">opendronemap</span><span class="o">/</span><span class="n">nodeodm</span>   <span class="s2">&quot;/usr/bin/nodejs /va…&quot;</span>   <span class="mi">37</span> <span class="n">hours</span> <span class="n">ago</span>        <span class="n">Up</span> <span class="mi">37</span> <span class="n">hours</span>               <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="mi">3000</span><span class="o">-&gt;</span><span class="mi">3000</span><span class="o">/</span><span class="n">tcp</span>   <span class="n">flamboyant_dhawan</span>
<span class="n">cd7b9585b8f6</span>        <span class="n">opendronemap</span><span class="o">/</span><span class="n">odm</span>       <span class="s2">&quot;bash&quot;</span>                   <span class="mi">3</span> <span class="n">days</span> <span class="n">ago</span>          <span class="n">Exited</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="mi">37</span> <span class="n">hours</span> <span class="n">ago</span>                            <span class="n">nostalgic_lederberg</span>
<span class="n">e31010c00b9a</span>        <span class="n">opendronemap</span><span class="o">/</span><span class="n">odm</span>       <span class="s2">&quot;python /code/run.py…&quot;</span>   <span class="mi">3</span> <span class="n">days</span> <span class="n">ago</span>          <span class="n">Exited</span> <span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="mi">3</span> <span class="n">days</span> <span class="n">ago</span>                              <span class="n">suspicious_kepler</span>
<span class="n">c44e0d0b8448</span>        <span class="n">opendronemap</span><span class="o">/</span><span class="n">nodeodm</span>   <span class="s2">&quot;/usr/bin/nodejs /va…&quot;</span>   <span class="mi">3</span> <span class="n">days</span> <span class="n">ago</span>          <span class="n">Exited</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="mi">37</span> <span class="n">hours</span> <span class="n">ago</span>                            <span class="n">wonderful_burnell</span>
</pre></div>
</div>
</div>
<div class="section" id="accessing-logs-on-the-instance">
<h3>الوصول إلى السجلات على سبيل المثال<a class="headerlink" href="#accessing-logs-on-the-instance" title="Permalink to this headline">¶</a></h3>
<p>باستخدام &quot;  CONTAINER ID&quot; أو الاسم ، يمكننا الوصول إلى أي سجلات متاحة على الجهاز على النحو التالي:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">docker</span> <span class="n">logs</span> <span class="mi">2518817537</span><span class="n">ce</span>
</pre></div>
</div>
<p>من المحتمل أن يكون هذا كبير الحجم غير عملي ، ولكن يمكننا استخدام حرف <cite>|</cite> للأنبوب وأدوات أخرى لاستخراج ما نحتاجه فقط من السجلات. على سبيل المثال ، يمكننا التنقل عبر السجل ببطء باستخدام الأمر <cite>more</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">docker</span> <span class="n">logs</span> <span class="mi">2518817537</span><span class="n">ce</span> <span class="o">|</span> <span class="n">more</span>
<span class="p">[</span><span class="n">INFO</span><span class="p">]</span>    <span class="n">DTM</span> <span class="ow">is</span> <span class="n">turned</span> <span class="n">on</span><span class="p">,</span> <span class="n">automatically</span> <span class="n">turning</span> <span class="n">on</span> <span class="n">point</span> <span class="n">cloud</span> <span class="n">classification</span>
<span class="p">[</span><span class="n">INFO</span><span class="p">]</span>    <span class="n">Initializing</span> <span class="n">OpenDroneMap</span> <span class="n">app</span> <span class="o">-</span> <span class="n">Mon</span> <span class="n">Sep</span> <span class="mi">23</span> <span class="mi">01</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">33</span>  <span class="mi">2019</span>
<span class="p">[</span><span class="n">INFO</span><span class="p">]</span>    <span class="o">==============</span>
<span class="p">[</span><span class="n">INFO</span><span class="p">]</span>    <span class="n">build_overviews</span><span class="p">:</span> <span class="kc">False</span>
<span class="p">[</span><span class="n">INFO</span><span class="p">]</span>    <span class="n">camera_lens</span><span class="p">:</span> <span class="n">auto</span>
<span class="p">[</span><span class="n">INFO</span><span class="p">]</span>    <span class="n">crop</span><span class="p">:</span> <span class="mi">3</span>
<span class="p">[</span><span class="n">INFO</span><span class="p">]</span>    <span class="n">debug</span><span class="p">:</span> <span class="kc">False</span>
<span class="p">[</span><span class="n">INFO</span><span class="p">]</span>    <span class="n">dem_decimation</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">[</span><span class="n">INFO</span><span class="p">]</span>    <span class="n">dem_euclidean_map</span><span class="p">:</span> <span class="kc">False</span>
<span class="o">...</span>
</pre></div>
</div>
<p>الضغط على <cite>Enter</cite> أو` Space` أو مفاتيح الأسهم أو <cite>Page Up</cite> أو` Page Down` سيساعدنا الآن في التنقل عبر السجلات. الحرف الصغير <cite>Q</cite> سيتيح لنا الهروب إلى سطر الأوامر.</p>
<p>يمكننا أيضًا استخراج نهاية السجلات فقط باستخدام أمر &quot;الذيل&quot; كما يلي:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">docker</span> <span class="n">logs</span> <span class="mi">2518817537</span><span class="n">ce</span> <span class="o">|</span> <span class="n">tail</span> <span class="o">-</span><span class="mi">5</span>
<span class="p">[</span><span class="n">INFO</span><span class="p">]</span>    <span class="n">Cropping</span> <span class="o">/</span><span class="n">datasets</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">odm_orthophoto</span><span class="o">/</span><span class="n">odm_orthophoto</span><span class="o">.</span><span class="n">tif</span>
<span class="p">[</span><span class="n">INFO</span><span class="p">]</span>    <span class="n">running</span> <span class="n">gdalwarp</span> <span class="o">-</span><span class="n">cutline</span> <span class="o">/</span><span class="n">datasets</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">odm_georeferencing</span><span class="o">/</span><span class="n">odm_georeferenced_model</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">gpkg</span> <span class="o">-</span><span class="n">crop_to_cutline</span> <span class="o">-</span><span class="n">co</span> <span class="n">NUM_THREADS</span><span class="o">=</span><span class="mi">8</span> <span class="o">-</span><span class="n">co</span> <span class="n">BIGTIFF</span><span class="o">=</span><span class="n">IF_SAFER</span> <span class="o">-</span><span class="n">co</span> <span class="n">BLOCKYSIZE</span><span class="o">=</span><span class="mi">512</span> <span class="o">-</span><span class="n">co</span> <span class="n">COMPRESS</span><span class="o">=</span><span class="n">DEFLATE</span> <span class="o">-</span><span class="n">co</span> <span class="n">BLOCKXSIZE</span><span class="o">=</span><span class="mi">512</span> <span class="o">-</span><span class="n">co</span> <span class="n">TILED</span><span class="o">=</span><span class="n">YES</span> <span class="o">-</span><span class="n">co</span> <span class="n">PREDICTOR</span><span class="o">=</span><span class="mi">2</span> <span class="o">/</span><span class="n">datasets</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">odm_orthophoto</span><span class="o">/</span><span class="n">odm_orthophoto</span><span class="o">.</span><span class="n">original</span><span class="o">.</span><span class="n">tif</span> <span class="o">/</span><span class="n">datasets</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">odm_orthophoto</span><span class="o">/</span><span class="n">odm_orthophoto</span><span class="o">.</span><span class="n">tif</span> <span class="o">--</span><span class="n">config</span> <span class="n">GDAL_CACHEMAX</span> <span class="mf">48.95</span><span class="o">%</span>
<span class="n">Using</span> <span class="n">band</span> <span class="mi">4</span> <span class="n">of</span> <span class="n">source</span> <span class="n">image</span> <span class="k">as</span> <span class="n">alpha</span><span class="o">.</span>
<span class="n">Creating</span> <span class="n">output</span> <span class="n">file</span> <span class="n">that</span> <span class="ow">is</span> <span class="mi">111567</span><span class="n">P</span> <span class="n">x</span> <span class="mi">137473</span><span class="n">L</span><span class="o">.</span>
<span class="n">Processing</span> <span class="nb">input</span> <span class="n">file</span> <span class="o">/</span><span class="n">datasets</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">odm_orthophoto</span><span class="o">/</span><span class="n">odm_orthophoto</span><span class="o">.</span><span class="n">original</span><span class="o">.</span><span class="n">tif</span><span class="o">.</span>
</pre></div>
</div>
<p>تخبر القيمة <cite>-5</cite> الأمر tail بإعطائنا الأسطر الخمسة الأخيرة فقط من السجلات.</p>
</div>
<div class="section" id="command-line-access-to-instances">
<h3>وصول سطر الأوامر إلى المثيلات<a class="headerlink" href="#command-line-access-to-instances" title="Permalink to this headline">¶</a></h3>
<p>في بعض الأحيان نحتاج إلى التعمق أكثر في استكشافنا لعملية OpenDroneMap. لهذا ، يمكننا الحصول على وصول مباشر لسطر الأوامر إلى الأجهزة. لهذا ، يمكننا استخدام <cite>docker exec</cite> لتنفيذ قذيفة سطر الأوامر` bash` في الجهاز المعني على النحو التالي:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">docker</span> <span class="n">exec</span> <span class="o">-</span><span class="n">ti</span> <span class="mi">2518817537</span><span class="n">ce</span> <span class="n">bash</span>
<span class="n">root</span><span class="o">@</span><span class="mi">2518817537</span><span class="n">ce</span><span class="p">:</span><span class="o">/</span><span class="n">code</span><span class="c1">#</span>
</pre></div>
</div>
<p>الآن تم تسجيل دخولنا إلى مثيل عامل الميناء لدينا ويمكننا استكشاف الجهاز.</p>
</div>
<div class="section" id="cleaning-up-after-docker">
<h3>التنظيف بعد Docker<a class="headerlink" href="#cleaning-up-after-docker" title="Permalink to this headline">¶</a></h3>
<p>تمتع Docker باستخدام مؤسف للمساحة ولا يقوم افتراضيًا بتنظيف البيانات والآلات الزائدة عند اكتمال العمليات. يمكن أن يكون ذلك مفيدًا إذا احتجنا إلى الوصول إلى عملية تم إنهاؤها منذ ذلك الحين ، ولكنها تحمل عبء استخدام كميات متزايدة من التخزين بمرور الوقت. يقدم Maciej Łebkowski <cite>نظرة عامة ممتازة على كيفية إدارة الاستخدام الزائد للقرص في عامل الميناء &lt;https://lebkowski.name/docker-volumes/&gt;</cite> _.</p>
</div>
</div>
<div class="section" id="using-odm-from-low-bandwidth-location">
<h2>استخدام ODM من موقع النطاق الترددي المنخفض<a class="headerlink" href="#using-odm-from-low-bandwidth-location" title="Permalink to this headline">¶</a></h2>
<div class="section" id="what-is-this-and-who-is-it-for">
<h3>ما هذا ومن هو؟<a class="headerlink" href="#what-is-this-and-who-is-it-for" title="Permalink to this headline">¶</a></h3>
<p>عبر  <a class="reference external" href="https://github.com/ivangayton/GDAL_scripts/">Ivan Gayton's repo</a></p>
<p>&lt;<a class="reference external" href="https://www.opendronemap.org/">https://www.opendronemap.org/</a>&gt;&quot; __ لا يمكن دائمًا إعدادها بشكل فعال محليًا - يتطلب الأمر جهازًا قويًا إلى حد ما لمعالجة مجموعات البيانات الكبيرة - لذا يمكن أن تكون الآلة السحابية أحيانًا هي الحل للأشخاص في حقل. ومع ذلك ، فإن عرض النطاق الترددي يمثل مشكلة في العديد من الإعدادات منخفضة الدخل. لا يمكن حل هذا القيد تمامًا ، ولكن الطريقة التالية تؤدي مهمة معقولة لتقليل النطاق الترددي اللازم لمعالجة مجموعات بيانات صور الطائرات بدون طيار على السحابة من المواقع الأفريقية.</p>
<p>نقدم هنا عملية صعبة ولكنها عملية لإنشاء جهاز سحابة OpenDroneMap (* لا * CloudODM ، ضع في اعتبارك أنه مجرد نسخة مستندة إلى السحابة من ODM تقوم بتشغيلها من سطر الأوامر) واستخدامها لمعالجة مجموعات الصور الكبيرة عن بُعد. إنه يتطلب معرفة باستخدام سطر أوامر Unix و ssh وحساب Digital Ocean (قد يعمل Amazon AWS أيضًا ، ربما مع اختلافات طفيفة في الإعداد) ، ومستوى معتدل من معرفة الكمبيوتر العامة. إذا لم تكن على دراية بالكمبيوتر إلى حد ما وترغب في إثارة ضجة مع إعداد صعب قليلاً ، فإن &quot;CloudODM &lt;<a class="reference external" href="https://www.opendronemap.org/cloudodm/">https://www.opendronemap.org/cloudodm/</a>&gt;&quot; __ هو ما يجب أن تنظر إليه.</p>
<p>تستهدف العملية برمتها في الغالب شخصًا يقوم بمهام كبيرة في موقع أفريقي أو موقع مماثل يتطلع إلى معالجة البيانات في أسرع وقت ممكن بينما لا يزال في بيئة ميدانية. ولذلك ، فإنه يؤكد على سير العمل الذي يهدف إلى تقليل نقل البيانات / النطاق الترددي ، بدلاً من أبسط طريقة لتشغيل ODM.</p>
</div>
<div class="section" id="steps">
<h3>خطوات<a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h3>
<div class="section" id="install">
<h4>تثبيت<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>قم بإنشاء قطرة محيط رقمية مع ذاكرة وصول عشوائي بسعة 4 جيجابايت على الأقل. سيكلفك ذلك حوالي 20 دولارًا / شهريًا. من المحتمل أن يفشل التثبيت أقل من 4 غيغابايت من ذاكرة الوصول العشوائي. عندما نقوم بتشغيل عملية ODM فعليًا ، سنقوم بتغيير حجمها إلى جهاز سحابي أكبر بكثير وأكثر تكلفة ، ولكن بين الجري يمكنك تقليصها بين الجري إلى ثاني أرخص قطيرة والتي تكلف 10 دولارات فقط في الشهر (أرخص قطرة ، بسعر 5 دولارات شهريًا ، ويأتي مع محرك أقراص صغير لا يمكنك تقليصه).<ul>
<li>يجب أن يكون نسخة Ubuntu 18.04 لضمان توافق التبعية</li>
<li>Create a user with sudo privileges. <a class="reference external" href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-18-04">Digital Ocean’s insanely good
documentation</a>
can help you figure this out. In our case we set up a user called
<code class="docutils literal notranslate"><span class="pre">odm</span></code>, so connecting to it is via the command
<code class="docutils literal notranslate"><span class="pre">ssh</span> <span class="pre">odm&#64;xxx.xxx.xxx.xxx</span></code> (where the x’s stand for the IPv4
address of your server). If you want to follow this example
closely, <em>do</em> use the username <code class="docutils literal notranslate"><span class="pre">odm</span></code>; then your install path
will be <code class="docutils literal notranslate"><span class="pre">/home/odm/ODM/</span></code> and will match all of the examples in
this document.</li>
<li>Go ahead and execute <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">update</span></code> and <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">upgrade</span></code> to ensure
your server isn’t dangerously without updates. Make sure to stay with
Ubuntu 18.04.</li>
</ul>
</li>
<li>قم بتنزيل وتثبيت ODM عليه من <cite>ODM Github &lt;https://github.com/OpenDroneMap/ODM&gt;</cite> __ (عادي ، وليس WebODM) باستخدام الأوامر التالية:</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">pull</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">OpenDroneMap</span><span class="o">/</span><span class="n">ODM</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">ODM</span>
<span class="n">bash</span> <span class="n">configure</span><span class="o">.</span><span class="n">sh</span> <span class="n">install</span>
</pre></div>
</div>
<ul class="simple">
<li>إذا قمت بذلك من المجلد الرئيسي الافتراضي للمستخدم (أي `` odm '') ، فسيكون المسار إلى التثبيت هو '' home / odm / ODM '' (يُختصر باسم `` ~ / ODM / '').</li>
<li>هناك بعض المتغيرات البيئية التي يجب تحديدها. افتح ملف ~/.bashrc على جهازك وأضف الأسطر الثلاثة 3 في النهاية (من <cite>github ODM &lt;https://github.com/OpenDroneMap/ODM&gt;</cite> __). يمكن فتح الملف باستخدام <code class="docutils literal notranslate"><span class="pre">nano</span> <span class="pre">~/.bashrc</span></code> (أو أي محرر نصوص تستخدمه بدلاً من nano). تأكد من استبدال <code class="docutils literal notranslate"><span class="pre">/home/odm/</span></code> بالمسار الصحيح إلى الموقع الذي قمت باستخراج OpenDroneMap إذا لم تفعل كل شيء تمامًا كما في مثالنا (على سبيل المثال إذا كنت تستخدم اسم مستخدم مختلفًا في إعداد الخادم الخاص بك) :</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PYTHONPATH=$PYTHONPATH:/home/odm/ODM/SuperBuild/install/lib/python2.7/dist-packages
export PYTHONPATH=$PYTHONPATH:/home/odm/ODM/SuperBuild/src/opensfm
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/odm/ODM/SuperBuild/install/lib
</pre></div>
</div>
<ul class="simple">
<li>لاحظ أن الملف التمهيدي لـ github الخاص بـ ODM يحتوي على خطأ بسيط ، سيكون اسم دليل التثبيت هو ODM ، وليس OpenDroneMap (سترى هذا إذا قارنت الإرشادات المذكورة أعلاه بالإرشادات الموجودة على ODM GitHub).</li>
<li>لمنع حدوث عطل حيث تفشل عملية الدمج المقسم في تحديد موقع الملف التنفيذي الخاص بها ، نضيف الأسطر التالية إلى <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code> (اضبط المسارات إذا قمت بإعداد الأشياء بشكل مختلف عن مثالنا):</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export PYTHONPATH=$PYTHONPATH:/home/odm/ODM/
export PATH=$PATH:/home/odm/ODM/
</pre></div>
</div>
<ul class="simple">
<li>ستحتاج الآن إلى محرك أقراص ثابت سحابي ثانٍ (&quot;حجم&quot; في المصطلح الرقمي للمحيط) كبير بما يكفي لإدارة مشروعك. يبدو أن القاعدة الأساسية هي 10 أضعاف حجم مجموعة صورك الخام ؛ لدينا مجموعة من الصور بحجم 100 جيجابايت وقمنا بإعداد وحدة تخزين بحجم 1000 جيجابايت (بمجرد الانتهاء من التشغيل ، يجب أن تكون قادرًا على التخلص من معظم سعة محرك الأقراص الباهظة الثمن هذه ، ولكن يلزم إكمال العملية). قم بإعداد الصوت وإرفاقه بالقطرة الخاصة بك ، و <a class="reference external" href="https://www.digitalocean.com/docs/volumes/how-to/mount/">تكوين نقطة التحميل الخاصة به</a> (في هذا المثال ، نقوم بتعيينه إلى <code class="docutils literal notranslate"><span class="pre">/mnt/odmdata/</span></code>).</li>
</ul>
</div>
<div class="section" id="prep-data-and-project">
<h4>إعداد البيانات والمشروع<a class="headerlink" href="#prep-data-and-project" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>الآن ادفع صورك إلى الخادم. يمكنك استخدام <a class="reference external" href="https://en.wikipedia.org/wiki/Secure_copy">Secure Copy (scp)</a> مثل ذلك: <code class="docutils literal notranslate"><span class="pre">scp</span> <span class="pre">-r</span> <span class="pre">/path/to/my/imagefolder</span> <span class="pre">odm&#64;xxx.xxx.xxx.xxx:/mnt/odmdata/</span></code>.<ul>
<li>يؤدي هذا إلى دفع المجلد بالكامل المليء بالصور (هذا ما يفعله الخيار &quot;-r&quot; ، &quot;العودية&quot;) في الموقع البعيد (في مثالنا ، في الحجم الذي نعلقه على الجهاز السحابي على <code class="docutils literal notranslate"><span class="pre">/mnt/odmdata/</span></code>.</li>
<li>سيستغرق هذا بعض عرض النطاق الترددي. لا توجد طريقة حول حجم الملفات.<a class="reference external" href="#footnote1">1</a>, <a class="reference external" href="#footnote2">2</a></li>
</ul>
</li>
</ul>
<div class="section" id="directory-structure">
<h5>بنية الدليل<a class="headerlink" href="#directory-structure" title="Permalink to this headline">¶</a></h5>
<p>يتطلب ODM إعداد الدلائل الموجودة على الجهاز فقط. البتات الحرجة هي مجلد التثبيت (إذا قمت بتثبيته كما هو موضح أعلاه ، فهو <code class="docutils literal notranslate"><span class="pre">/home/odm/ODM/</span></code> ومجلد المشروع (i.e. <code class="docutils literal notranslate"><span class="pre">/mnt/odmdata/myproject/</span></code>))</p>
<ul class="simple">
<li>يحدد ملف settings.yaml الخاص بـ ODM دليل أصل واحد يحتوي على كافة المشاريع. هذا هو ما يحدث في سطر مسار المشروع لملف settings.yaml (بشكل مثير للارتباك قليلاً ، هذا في الواقع هو الدليل * الأصل * لأدلة المشروع الفردية ، والتي يتم تحديدها بواسطة معلمة اسم المشروع عند استدعاء ODM). قم بتحرير الإعدادات. yaml وقم بتعيين معلمة project_path إلى (وفقًا لإعداد المثال الخاص بنا) <code class="docutils literal notranslate"><span class="pre">/mnt/odmdata/</span></code> ، والتي تشير في هذه الحالة إلى المجلد الذي أنشأناه. يتم إنشاء أدلة المشاريع الفردية في ذلك.</li>
<li>دلائل المشروع الفردية ، أي``/mnt/odmdata/myproject/`` <cite>تحتوي على ملف gcp_list.txt ، ملف image_groups.txt ، ومجلد الصور لكل مشروع`</cite>`</li>
<li>يحتوي مجلد الصور ، أي <code class="docutils literal notranslate"><span class="pre">`/mnt/odmdata/myproject/images/</span></code> على جميع الصور. إذا قمت بإعداده على هذا النحو ، فلن تتم إعادة نسخ الصور لأنها موجودة بالفعل في الدليل الذي يريدها ODM.</li>
<li>قم بتعديل settings.yaml لتحديد الدليل الأصلي لمجلد المشروع (في هذه الحالة المجلد الذي أنشأناه ، `` / mnt / odmdata / <code class="docutils literal notranslate"><span class="pre">).</span> <span class="pre">تأكد</span> <span class="pre">من</span> <span class="pre">أن</span> <span class="pre">الصور</span> <span class="pre">في</span> <span class="pre">الموضع</span> <span class="pre">الصحيح</span> <span class="pre">،</span> <span class="pre">مثل</span>&#160; <span class="pre">``/mnt/odmdata/myproject/images</span></code> والملفات المساعدة الأخرى (gcp_list.txt و image_groups.txt) في المجلد الجذر <code class="docutils literal notranslate"><span class="pre">/mnt/odmdata/myproject/</span></code></li>
<li>إذا كانت لديك الصور في مجلدات منفصلة لكتل ​​أو رحلات طيران فردية (والتي ستفعلها إذا تم تنظيم إدارة رحلتك) ، فيمكنك إنشاء ملف image_groups.txt مع التعويذات <code class="docutils literal notranslate"><span class="pre">لـ</span> <span class="pre">i</span> <span class="pre">in</span> <span class="pre">*</span> <span class="pre">؛</span> <span class="pre">هل</span> <span class="pre">cd</span> <span class="pre">$</span> <span class="pre">i</span> <span class="pre">؛</span> <span class="pre">for</span> <span class="pre">j</span> <span class="pre">in</span> <span class="pre">*؛</span> <span class="pre">do</span> <span class="pre">echo</span> <span class="pre">&quot;$</span> <span class="pre">j</span> <span class="pre">$</span> <span class="pre">i&quot;</span> <span class="pre">&gt;&gt;</span> <span class="pre">../$i.txt؛</span> <span class="pre">فعله؛</span> <span class="pre">مؤتمر</span> <span class="pre">نزع</span> <span class="pre">السلاح</span> <span class="pre">../</span> <span class="pre">؛</span> <span class="pre">فعل</span> <span class="pre">؛</span></code> و <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">../</span></code> ، <code class="docutils literal notranslate"><span class="pre">لأني</span> <span class="pre">في</span> <span class="pre">myproject</span> <span class="pre">/</span> <span class="pre">*.</span> <span class="pre">txt</span> <span class="pre">؛</span> <span class="pre">do</span> <span class="pre">cat</span> <span class="pre">$</span> <span class="pre">i</span> <span class="pre">&gt;&gt;</span> <span class="pre">image_groups.txt؛</span> <span class="pre">فعل</span> <span class="pre">؛</span></code>. من المفترض أن يؤدي ذلك إلى إنشاء ملف بهيكل صحيح: قائمة بجميع ملفات الصور و &quot;اسم المجموعة&quot; بعد كل ملف (والذي سيكون في هذه الحالة ببساطة اسم المجلد الذي جاء منه). ثم انقل جميع ملفات الصور إلى دليل واحد يسمى الصور في دليل جذر المشروع (لذا <code class="docutils literal notranslate"><span class="pre">/mnt/odmdata/myproject/images/</span></code>). سيسمح ملف image_groups.txt لـ ODM بتتبع الصور التي تنتمي إلى نفس الدفعة ، على الرغم من أنها كلها في دليل واحد.</li>
</ul>
</div>
</div>
<div class="section" id="resize-droplet-pull-pin-run-away">
<h4>تغيير حجم القطرة ، وسحب دبوس ، والهروب<a class="headerlink" href="#resize-droplet-pull-pin-run-away" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>قم بإيقاف تشغيل جهازك وتغيير حجمه إلى عدد هائل من وحدات المعالجة المركزية وكمية الذاكرة المناسبة. أستخدم الجهاز المُحسّن للذاكرة مع 24 وحدة vCPU مخصصة و 192 غيغابايت من ذاكرة الوصول العشوائي (والتي تكلف حوالي 1.60 دولارًا في الساعة - والتي تضيف بسرعة ، تزيد عن 1000 دولار / شهر). إعادة التشغيل ، والبدء في العمل بسرعة حتى لا تضيع وقتًا كبيرًا.</li>
<li>ابدأ تشغيل عملية ODM عبر ssh باستخدام nohup (بحيث إذا تم قطع الاتصال ، فستستمر المعالجة)<ul>
<li>بدلاً من ذلك ، يمكنك استخدام شاشة GNU لبدء العملية من جلسة الشاشة التي لن تتوقف إذا انقطع اتصالك ؛ قم بتشغيل `` الشاشة '' ، واستخدم `` &lt;ctrl&gt; a &lt;ctrl&gt; d '' لفصل &quot;الشاشة - r&quot; لإعادة توصيلها. لكن استخدام الشاشة لن ​​يمنحك ملف سجل لجميع مخرجات وحدة التحكم ما لم تفعل شيئًا محددًا لالتقاط ذلك ، بينما يمنحك nohup ملفًا يحتوي على جميع مخرجات وحدة التحكم ، بما في ذلك رسائل الخطأ ، مجانًا</li>
<li>ملاحظة: اعتبارًا من 2020-03، يبدو أن التعطيل العادي `` python run.py -i /path/to/image/folder project_nam '' يبدو * غير * يعمل ؛ تؤدي المعلمة &quot;-i&quot; أو &quot;--image&quot; إلى حدوث خطأ غريب. لذا نسقط المعلمة -i ، ونعتمد على سطر دليل المشروع في ملف settings.yaml لتوجيه ODM إلى المكان الصحيح. الآن باستخدام (بما في ذلك الدمج المقسم):</li>
</ul>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nohup</span> <span class="n">python</span> <span class="n">run</span><span class="o">.</span><span class="n">py</span> <span class="n">myproject</span> <span class="o">--</span><span class="n">split</span> <span class="mi">1</span> <span class="o">--</span><span class="n">split</span><span class="o">-</span><span class="n">overlap</span> <span class="mi">0</span> <span class="o">--</span><span class="n">ignore</span><span class="o">-</span><span class="n">gsd</span> <span class="o">--</span><span class="n">depthmap</span><span class="o">-</span><span class="n">resolution</span> <span class="mi">1000</span> <span class="o">--</span><span class="n">orthophoto</span><span class="o">-</span><span class="n">resolution</span> <span class="mi">5</span> <span class="o">--</span><span class="n">dem</span><span class="o">-</span><span class="n">resolution</span> <span class="mi">15</span> <span class="o">--</span><span class="n">pc</span><span class="o">-</span><span class="n">las</span> <span class="o">--</span><span class="n">dsm</span>
</pre></div>
</div>
<ul class="simple">
<li>هذا يشير إلى ODM في المجلد (في هذا المثال) <code class="docutils literal notranslate"><span class="pre">`/mnt/odmdata/myproject/</span></code>. بشرط أن يكون ملف image_groups.txt و gcp_list.txt في هذا المجلد ، فإن الصور موجودة في <code class="docutils literal notranslate"><span class="pre">/mnt/odmdata/myproject/images/</span></code> ، ومسار المشروع في الإعدادات. yaml هو <code class="docutils literal notranslate"><span class="pre">/mnt/odmdata/</span></code>  لن تضيع الوقت ونسخ الصور الفضائية.</li>
<li>لاحظ أن هذا يفترض أن لديك ملف image_groups.txt. إذا لم يكن الأمر كذلك ، فمن المحتمل أن يؤدي هذا &quot;-split-interap 0&quot; إلى تلاعب الأمور ، و &quot;--plit 1&quot; هو حرفيا رقم عشوائي سيتم تجاهله بعد تحميل ملف image_groups.txt (أعتقد ذلك تتحكم عادةً في عدد المجموعات التي تقوم بتقسيم مجموعة من الصور إليها ، ولكن في حالتنا نحن نفترض أن الصور مجمعة بالفعل بشكل معقول). إذا لم يكن لديك مجموعة بيانات كبيرة (&gt; 1000 صورة) ، فاحذف خياري &quot;- تقسيم&quot; و &quot;- تقسيم متداخل&quot;.</li>
<li>اتبع التقدم باستخدام الذيل (حتى تعرف متى يتم ذلك)</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tail</span> <span class="o">-</span><span class="n">f</span> <span class="n">nohup</span><span class="o">.</span><span class="n">out</span>
</pre></div>
</div>
<ul class="simple">
<li>قد ترغب في مراقبة htop (للحصول على فكرة عن استخدام الموارد حتى تتمكن في المستقبل من تدوير آلة كبيرة بقدر الضرورة)</li>
</ul>
</div>
<div class="section" id="after-it-finishes-assuming-you-survive-that-long">
<h4>بعد الانتهاء (بافتراض أنك تعيش طويلاً)<a class="headerlink" href="#after-it-finishes-assuming-you-survive-that-long" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>بمجرد الانتهاء من المعالجة ، أغلق الماكينة وقم بتغيير حجمها مرة أخرى إلى الحد الأدنى للسعة غير المكلفة.</li>
<li>قم بتشغيل الجهاز احتياطيًا ، وقم بتسجيل الدخول عبر ssh.</li>
<li>إذا كنت تريد حفظ النطاق الترددي للتنزيل ، يمكنك ضغط الصورة التقويمية باستخدام GDAL. لا تضيف نظرة عامة ، افعل ذلك على جهازك المحلي لتجنب تكبير الملف قبل تنزيله.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gdal_translate</span> <span class="o">-</span><span class="n">co</span> <span class="n">COMPRESS</span><span class="o">=</span><span class="n">JPEG</span> <span class="o">-</span><span class="n">co</span> <span class="n">PHOTOMETRIC</span><span class="o">=</span><span class="n">YCBCR</span> <span class="o">-</span><span class="n">co</span> <span class="n">TILED</span><span class="o">=</span><span class="n">YES</span> <span class="o">-</span><span class="n">b</span> <span class="mi">1</span> <span class="o">-</span><span class="n">b</span> <span class="mi">2</span> <span class="o">-</span><span class="n">b</span> <span class="mi">3</span> <span class="o">-</span><span class="n">mask</span> <span class="mi">4</span> <span class="o">--</span><span class="n">config</span> <span class="n">GDAL_TIFF_INTERNAL_MASK</span> <span class="n">YES</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">original</span><span class="o">/</span><span class="n">filename</span><span class="o">.</span><span class="n">extension</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">output</span><span class="o">.</span><span class="n">tif</span>
</pre></div>
</div>
<ul class="simple">
<li>التنزيل باستخدام scp: <code class="docutils literal notranslate"><span class="pre">scp</span> <span class="pre">odm&#64;xxx.xxx.xxx.xxx:/mnt/odmdata/myproject/odm_orthophoto/odm_orthophoto.tif</span></code> (أو احصل على النسخة المضغوطة التي أنشأتها في الخطوة الأخيرة)</li>
<li>بمجرد الحصول على الملف على جهاز الكمبيوتر المحلي الخاص بك ، يمكنك استخدام QGIS لإضافة نظرة عامة (&quot;الأهرامات&quot;) أو استخدام أمر GDAL  <code class="docutils literal notranslate"><span class="pre">gdaladdo</span> <span class="pre">-r</span> <span class="pre">average</span> <span class="pre">/path/to/image.tif</span> <span class="pre">2</span> <span class="pre">4</span> <span class="pre">8</span> <span class="pre">16</span> <span class="pre">32</span> <span class="pre">64</span> <span class="pre">128</span> <span class="pre">256</span> <span class="pre">512</span> <span class="pre">1024</span></code>.</li>
<li>يمكنك أرشفة مجلدات odm_texturing و odm_georeferencing و odm-dem باستخدام tar لتسهيل عملية التنزيل في قطعة واحدة (وربما أصغر).</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tar</span> <span class="o">-</span><span class="n">zcvf</span> <span class="n">archivename</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">folder</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="arguments.html" class="btn btn-neutral float-right" title="الخيارات والإعلام" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral float-left" title="التثبيت والبدء" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, OpenDroneMap

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>